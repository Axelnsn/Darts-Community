# Story 6.4: Public Profile View

## Status: Draft

## Story

**As a** visitor,
**I want** to view a player's public profile,
**so that** I can learn about them without logging in.

## Acceptance Criteria

1. Public profile accessible without authentication
2. Only sections marked "Public" are displayed
3. Private sections show placeholder or are hidden entirely
4. Profile owner sees all sections regardless of privacy
5. Visual indicator for profile owner showing public vs private view
6. SEO-friendly meta tags (title, description, Open Graph)

## Tasks / Subtasks

- [ ] Task 1: Create PublicProfileController (AC: 1)
  - [ ] Create `app/Http/Controllers/PublicProfileController.php`
  - [ ] Implement show method
  - [ ] No auth middleware required

- [ ] Task 2: Apply Privacy Filtering (AC: 2, 3, 4)
  - [ ] Use PrivacyService to filter visible sections
  - [ ] Check if viewer is owner
  - [ ] Hide private sections

- [ ] Task 3: Create Public Profile View (AC: 2, 3)
  - [ ] Create `resources/views/pages/public/player.blade.php`
  - [ ] Conditionally display sections
  - [ ] Show placeholder for private sections

- [ ] Task 4: Owner Indicator (AC: 5)
  - [ ] Show "View as Public" toggle for owner
  - [ ] Indicate which sections are private

- [ ] Task 5: SEO Meta Tags (AC: 6)
  - [ ] Add title tag with player name
  - [ ] Add meta description
  - [ ] Add Open Graph tags for social sharing

## Dev Notes

### Relevant Architecture References

**PublicProfileController:**
```php
public function show(string $slug)
{
    $player = Player::where('public_slug', $slug)->firstOrFail();
    $isOwner = auth()->check() && auth()->id() === $player->user_id;
    $privacyService = app(PrivacyService::class);

    return view('pages.public.player', [
        'player' => $player,
        'isOwner' => $isOwner,
        'showPersonal' => $privacyService->isVisible($player, 'personal', auth()->user()),
        'showClub' => $privacyService->isVisible($player, 'club', auth()->user()),
        'showSetup' => $privacyService->isVisible($player, 'setup', auth()->user()),
    ]);
}
```

**Meta Tags:**
```blade
<title>{{ $player->full_name }} - Darts Community</title>
<meta name="description" content="Profil de {{ $player->full_name }}, joueur de flÃ©chettes">
<meta property="og:title" content="{{ $player->full_name }} - Darts Community">
<meta property="og:type" content="profile">
<meta property="og:image" content="{{ $player->profile_photo_url }}">
```

### Testing

**Test Location:** `tests/Feature/PublicProfileTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
