# Story 4.4: Component Model Management

## Status: Draft

## Story

**As an** administrator,
**I want** to add component models to the catalog,
**so that** users can select specific products.

## Acceptance Criteria

1. Component model with fields: brand_id, type, name, attributes (JSON), image (optional)
2. Admin CRUD interface for components
3. Filter components by type and brand
4. Create component form with dynamic fields based on type
5. Image upload for component (optional)
6. Seed data: 20-30 popular components across types

## Tasks / Subtasks

- [ ] Task 1: Create Component Model & Migration (AC: 1)
  - [ ] Create Component model
  - [ ] Create migration with brand_id, type, name, attributes, image_path
  - [ ] Add belongsTo Brand relationship

- [ ] Task 2: Create Admin ComponentController (AC: 2, 4)
  - [ ] Create `app/Http/Controllers/Admin/ComponentController.php`
  - [ ] Implement CRUD methods
  - [ ] Handle dynamic attributes based on type

- [ ] Task 3: Create Component Views (AC: 2, 3, 4)
  - [ ] Create index view with filters
  - [ ] Create create/edit views with dynamic form
  - [ ] Add type and brand filter dropdowns

- [ ] Task 4: Component Image Upload (AC: 5)
  - [ ] Add image upload field
  - [ ] Store in `storage/app/public/components/`
  - [ ] Validate image type and size

- [ ] Task 5: Create ComponentSeeder (AC: 6)
  - [ ] Create seeder with popular components
  - [ ] Include mix of tips, barrels, shafts, flights

## Dev Notes

### Relevant Architecture References

**Component Model:**
```php
- id: bigint unsigned
- brand_id: bigint unsigned
- type: enum('tip', 'barrel', 'shaft', 'flight')
- name: string
- attributes: json nullable
- image_path: string nullable
```

**Sample Components:**
- Target Precision Points (tip, steel, 26mm)
- Winmau Vengeance (barrel, 24g, tungsten)
- Target Pro Grip (shaft, medium, nylon)
- Target Vision Ultra (flight, standard, 100)

### Testing

**Test Location:** `tests/Feature/Admin/ComponentManagementTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
