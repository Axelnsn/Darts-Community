# Story 5.4: Current Setup Designation

## Status: Draft

## Story

**As a** player,
**I want** to mark darts as my current setup,
**so that** visitors see what I'm currently using.

## Acceptance Criteria

1. "Set as Current" action on dart assemblies
2. Maximum 3 dart sets as current setup
3. Current setup highlighted in inventory view
4. Current setup prominently displayed on profile view
5. Remove from current setup functionality
6. Reorder current setup display (optional)

## Tasks / Subtasks

- [ ] Task 1: Add Current Setup Logic (AC: 1, 2)
  - [ ] Add setCurrent method to AssemblyController
  - [ ] Check max 3 current setups limit
  - [ ] Set is_current_setup = true

- [ ] Task 2: Remove from Current Setup (AC: 5)
  - [ ] Add removeCurrent method
  - [ ] Set is_current_setup = false

- [ ] Task 3: Update Inventory View (AC: 3)
  - [ ] Highlight current setups
  - [ ] Add "Set as Current" / "Remove" buttons

- [ ] Task 4: Display on Profile (AC: 4)
  - [ ] Add "Mon Setup" section to profile view
  - [ ] Display current dart assemblies
  - [ ] Show component details

- [ ] Task 5: Reorder Functionality (AC: 6)
  - [ ] Add display_order field
  - [ ] Allow drag-and-drop reordering (optional)

## Dev Notes

### Relevant Architecture References

**Routes:**
```php
Route::put('/equipment/assembly/{id}/current', [AssemblyController::class, 'setCurrent'])
    ->name('assembly.current');
Route::delete('/equipment/assembly/{id}/current', [AssemblyController::class, 'removeCurrent'])
    ->name('assembly.removeCurrent');
```

**Max 3 Validation:**
```php
$currentCount = DartAssembly::where('player_id', $player->id)
    ->where('is_current_setup', true)
    ->count();

if ($currentCount >= 3) {
    return back()->with('error', 'Vous ne pouvez avoir que 3 setups actuels maximum.');
}
```

### Testing

**Test Location:** `tests/Feature/Equipment/CurrentSetupTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
