# Story 7.5: Content Moderation

## Status: Draft

## Story

**As an** administrator,
**I want** to review and moderate user-uploaded content,
**so that** I can maintain platform quality and safety.

## Acceptance Criteria

1. Queue/list of recently uploaded content (photos, MP3s)
2. Filter by content type (profile photos, cover photos, walk-on songs, component photos)
3. Preview content directly in admin interface
4. Actions: Approve (default), Flag for review, Remove with reason
5. Removed content notification sent to user (optional)
6. Flagged content report for periodic review

## Tasks / Subtasks

- [ ] Task 1: Create UploadedContent Model (AC: 1)
  - [ ] Create model if not exists
  - [ ] Track all uploaded content

- [ ] Task 2: Create ModerationController (AC: 1, 4)
  - [ ] Create `app/Http/Controllers/Admin/ModerationController.php`
  - [ ] Implement index (list content)
  - [ ] Implement update (approve/flag/remove)

- [ ] Task 3: Moderation Queue View (AC: 1, 2, 3)
  - [ ] Create `resources/views/admin/moderation/index.blade.php`
  - [ ] Display content list with previews
  - [ ] Add type filter
  - [ ] Add status filter

- [ ] Task 4: Content Actions (AC: 4)
  - [ ] Add Approve button
  - [ ] Add Flag button
  - [ ] Add Remove button with reason input

- [ ] Task 5: Notifications (AC: 5)
  - [ ] Send notification when content removed
  - [ ] Include removal reason

- [ ] Task 6: Flagged Report (AC: 6)
  - [ ] Create flagged content view
  - [ ] Filter by status = flagged

## Dev Notes

### Relevant Architecture References

**UploadedContent Model:**
```php
- id: bigint unsigned
- player_id: bigint unsigned
- content_type: enum('profile_photo', 'cover_photo', 'walkon_mp3', 'component_photo')
- file_path: string
- status: enum('pending', 'approved', 'flagged', 'removed') default 'approved'
- moderated_by: bigint unsigned nullable
- moderated_at: timestamp nullable
- removal_reason: text nullable
```

**Routes:**
```php
Route::get('/admin/moderation', [ModerationController::class, 'index']);
Route::put('/admin/moderation/{id}', [ModerationController::class, 'update']);
```

### Testing

**Test Location:** `tests/Feature/Admin/ModerationTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
