# Story 4.3: Component Type Structure

## Status: Draft

## Story

**As an** administrator,
**I want** to define component types with specific attributes,
**so that** each dart part has appropriate fields.

## Acceptance Criteria

1. ComponentType enum or model: Tip, Barrel, Shaft, Flight
2. Type-specific attribute definitions:
   - Tip: type (steel/soft), length
   - Barrel: weight, material, grip_style
   - Shaft: length, material
   - Flight: shape, thickness
3. Attribute validation rules per type
4. UI adapts form fields based on component type

## Tasks / Subtasks

- [ ] Task 1: Define Component Types (AC: 1)
  - [ ] Create ComponentType enum
  - [ ] Define TIP, BARREL, SHAFT, FLIGHT values

- [ ] Task 2: Define Attribute Schemas (AC: 2)
  - [ ] Create attribute definitions per type
  - [ ] Store as JSON schema or config

- [ ] Task 3: Create Validation Rules (AC: 3)
  - [ ] Create ComponentRequest with dynamic validation
  - [ ] Validate attributes based on type

- [ ] Task 4: Dynamic Form Fields (AC: 4)
  - [ ] Create Blade partial for each type's attributes
  - [ ] Load correct partial based on type selection
  - [ ] Use JavaScript for dynamic field switching

## Dev Notes

### Relevant Architecture References

**ComponentType Enum:**
```php
enum ComponentType: string
{
    case TIP = 'tip';
    case BARREL = 'barrel';
    case SHAFT = 'shaft';
    case FLIGHT = 'flight';
}
```

**Attributes JSON Structure:**
```json
// Tip
{ "tip_type": "steel|soft", "length": "25mm" }

// Barrel
{ "weight": "24g", "material": "tungsten", "grip_style": "ringed" }

// Shaft
{ "length": "medium", "material": "aluminum" }

// Flight
{ "shape": "standard", "thickness": "100" }
```

**Attribute Options:**
- Tip type: steel, soft
- Barrel material: tungsten, brass, nickel-silver
- Barrel grip: ringed, knurled, smooth, shark, micro
- Shaft length: extra-short, short, medium, long
- Shaft material: nylon, aluminum, carbon, titanium
- Flight shape: standard, slim, kite, pear, teardrop
- Flight thickness: 75, 100, 150

### Testing

**Test Location:** `tests/Unit/ComponentTypeTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
