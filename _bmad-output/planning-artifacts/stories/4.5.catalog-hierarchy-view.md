# Story 4.5: Catalog Hierarchy View

## Status: Draft

## Story

**As an** administrator,
**I want** to view the catalog organized by brand and type,
**so that** I can manage the inventory effectively.

## Acceptance Criteria

1. Catalog dashboard showing statistics (total brands, components per type)
2. Hierarchical view: Brand > Type > Models
3. Quick filters by brand, type
4. Search across all components
5. Export catalog data (optional, for backup)

## Tasks / Subtasks

- [ ] Task 1: Create Catalog Dashboard (AC: 1)
  - [ ] Create `resources/views/admin/catalog/index.blade.php`
  - [ ] Display total brands count
  - [ ] Display components count per type
  - [ ] Add quick links to management pages

- [ ] Task 2: Hierarchical View (AC: 2)
  - [ ] Group components by brand
  - [ ] Within brand, group by type
  - [ ] Collapsible sections

- [ ] Task 3: Filters & Search (AC: 3, 4)
  - [ ] Add brand filter dropdown
  - [ ] Add type filter dropdown
  - [ ] Add search input for component name
  - [ ] Filter results dynamically

- [ ] Task 4: Export Functionality (AC: 5)
  - [ ] Add export button
  - [ ] Generate JSON/CSV export
  - [ ] Download file

## Dev Notes

### Relevant Architecture References

**Statistics Queries:**
```php
$stats = [
    'brands_count' => Brand::count(),
    'tips_count' => Component::where('type', 'tip')->count(),
    'barrels_count' => Component::where('type', 'barrel')->count(),
    'shafts_count' => Component::where('type', 'shaft')->count(),
    'flights_count' => Component::where('type', 'flight')->count(),
];
```

**Hierarchical Query:**
```php
$brands = Brand::with(['components' => function ($query) {
    $query->orderBy('type')->orderBy('name');
}])->orderBy('name')->get();
```

### Testing

**Test Location:** `tests/Feature/Admin/CatalogViewTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
