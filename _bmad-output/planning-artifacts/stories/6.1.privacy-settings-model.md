# Story 6.1: Privacy Settings Model

## Status: Draft

## Story

**As a** player,
**I want** privacy settings for my profile sections,
**so that** I control what information is public.

## Acceptance Criteria

1. Privacy settings stored in Player model or separate table
2. Configurable sections: Personal Info, Club Affiliation, Equipment Setup
3. Options per section: Public, Private
4. Default setting: All sections Public
5. Privacy settings persisted to database

## Tasks / Subtasks

- [ ] Task 1: Add Privacy Fields to Player Model (AC: 1, 2, 3)
  - [ ] Add privacy_personal enum column
  - [ ] Add privacy_club enum column
  - [ ] Add privacy_setup enum column
  - [ ] Define enum values: public, private

- [ ] Task 2: Set Default Values (AC: 4)
  - [ ] Set default to 'public' for all privacy fields
  - [ ] Update existing players if needed

- [ ] Task 3: Create PrivacyService (AC: 5)
  - [ ] Create `app/Services/PrivacyService.php`
  - [ ] Method to check if section is visible
  - [ ] Method to filter player data based on privacy

## Dev Notes

### Relevant Architecture References

**Player Privacy Fields:**
```php
- privacy_personal: enum('public', 'private') default 'public'
- privacy_club: enum('public', 'private') default 'public'
- privacy_setup: enum('public', 'private') default 'public'
- email_visible: boolean default false
```

**PrivacyService:**
```php
class PrivacyService
{
    public function isVisible(Player $player, string $section, ?User $viewer = null): bool
    {
        // Owner always sees everything
        if ($viewer && $viewer->id === $player->user_id) {
            return true;
        }

        $field = "privacy_{$section}";
        return $player->$field === 'public';
    }
}
```

### Testing

**Test Location:** `tests/Unit/Services/PrivacyServiceTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
