# Story 2.1: Player Model & Basic Profile Fields

## Status: Draft

## Story

**As a** registered user,
**I want** to create my player profile with basic information,
**so that** I have a foundation for my darts identity.

## Acceptance Criteria

1. Player model created with one-to-one relationship to User
2. Player profile automatically created upon user registration
3. Profile edit form with fields:
   - First name (prÃ©nom)
   - Last name (nom)
   - Nickname/pseudo (optional)
   - Date of birth
   - City (ville)
4. All fields validated appropriately (required fields, date format)
5. Profile data persisted to database
6. Success/error feedback displayed in French
7. Profile page displays entered information

## Tasks / Subtasks

- [ ] Task 1: Create Player Model & Migration (AC: 1)
  - [ ] Create Player model with fillable fields
  - [ ] Create migration with all columns
  - [ ] Define belongsTo User relationship
  - [ ] Define hasOne Player in User model

- [ ] Task 2: Auto-create Player on Registration (AC: 2)
  - [ ] Create PlayerService with createForUser method
  - [ ] Create UserObserver to trigger on user creation
  - [ ] Generate unique public_slug

- [ ] Task 3: Create Profile Edit Form (AC: 3, 4)
  - [ ] Create ProfileController with edit/update methods
  - [ ] Create ProfileUpdateRequest for validation
  - [ ] Create `resources/views/pages/profile/edit.blade.php`
  - [ ] Add all form fields with French labels

- [ ] Task 4: Profile View Page (AC: 7)
  - [ ] Add show method to ProfileController
  - [ ] Create `resources/views/pages/profile/show.blade.php`
  - [ ] Display all profile fields

- [ ] Task 5: Flash Messages (AC: 5, 6)
  - [ ] Implement success message on save
  - [ ] Implement error display for validation

## Dev Notes

### Relevant Architecture References

**Player Model Fields:**
```php
- id: bigint unsigned
- user_id: bigint unsigned (unique, FK)
- first_name: string nullable
- last_name: string nullable
- nickname: string nullable
- date_of_birth: date nullable
- city: string nullable
- skill_level: enum nullable
- profile_photo_path: string nullable
- cover_photo_path: string nullable
- public_slug: string unique
```

**PlayerService:**
```php
public function createForUser(User $user): Player
{
    return Player::create([
        'user_id' => $user->id,
        'public_slug' => $this->generateUniqueSlug($user),
    ]);
}
```

### Testing

**Test Location:** `tests/Feature/Profile/ProfileTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
