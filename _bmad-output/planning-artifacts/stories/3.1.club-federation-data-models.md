# Story 3.1: Club & Federation Data Models

## Status: Draft

## Story

**As a** system administrator,
**I want** club and federation data structures in place,
**so that** players can affiliate with organizations.

## Acceptance Criteria

1. Club model created with fields: name, city, federation_id
2. Federation model created with fields: name, code (e.g., FFD), country
3. Seed data: FFD federation pre-populated
4. Basic club seeder with 5-10 sample French clubs
5. Player model has club_id foreign key (nullable)
6. Database migrations created and tested

## Tasks / Subtasks

- [ ] Task 1: Create Federation Model & Migration (AC: 2)
  - [ ] Create Federation model
  - [ ] Create migration with name, code, country columns
  - [ ] Add relationships

- [ ] Task 2: Create Club Model & Migration (AC: 1)
  - [ ] Create Club model
  - [ ] Create migration with name, city, federation_id, is_active
  - [ ] Add belongsTo Federation relationship
  - [ ] Add hasMany Players relationship

- [ ] Task 3: Update Player Model (AC: 5)
  - [ ] Add club_id foreign key
  - [ ] Add federation_id foreign key
  - [ ] Add belongsTo relationships

- [ ] Task 4: Create Seeders (AC: 3, 4)
  - [ ] Create FederationSeeder (FFD)
  - [ ] Create ClubSeeder (5-10 French clubs)
  - [ ] Add to DatabaseSeeder

- [ ] Task 5: Run Migrations (AC: 6)
  - [ ] Test migrations up/down
  - [ ] Run seeders

## Dev Notes

### Relevant Architecture References

**Federation Model:**
```php
- id: bigint unsigned
- name: string (Fédération Française de Darts)
- code: string unique (FFD)
- country: string (France)
```

**Club Model:**
```php
- id: bigint unsigned
- federation_id: bigint unsigned nullable
- name: string
- city: string nullable
- is_active: boolean default true
```

**Sample Clubs for Seeder:**
- Darts Club Paris (Paris)
- Les Flèches Lyonnaises (Lyon)
- Darts Marseille (Marseille)
- Club de Fléchettes de Bordeaux (Bordeaux)
- Nantes Darts (Nantes)

### Testing

**Test Location:** `tests/Unit/Models/ClubTest.php`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Initial story creation from PRD | Sarah (PO) |
